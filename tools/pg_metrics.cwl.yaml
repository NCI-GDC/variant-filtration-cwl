#!/usr/bin/env cwl-runner

description: |
    description: "Adding metrics to postgres"
    Usage:  cwl-runner <this-file-path> options

requirements:
  - import: node-engine.cwl
  - class: DockerRequirement
    dockerPull: quay.io/ncigdc/variant-filtration-tool:0.1

class: CommandLineTool

inputs:
  - id: "#tool"
    type: string
    label: "Tool"
    description: "tool used"
    inputBinding:
        prefix: --tool

  - id: "#time_file"
    type: File
    label: "Time File"
    description: "Path to time file"
    inputBinding:
        prefix: --time_file

  - id: "#normal_id"
    type: string
    default: "unknown"
    label: "Normal ID"
    description: "Normal sample unique ID"
    inputBinding:
        prefix: --normal_id

  - id: "#tumor_id"
    type: string
    default: "unknown"
    label: "Tumor ID"
    description: "Tumor sample unique ID"
    inputBinding:
        prefix: --tumor_id

  - id: "#input_uuid"
    type: string
    default: "unknown"
    label: "Input UUID"
    description: "Source VCF ID"
    inputBinding:
        prefix: --input_uuid

  - id: "#output_uuid"
    type: string
    default: "unknown"
    label: "Output UUID"
    description: "Output VCF ID"
    inputBinding:
        prefix: --output_uuid

  - id: "#case_id"
    type: string
    default: "unknown"
    label: "Case UUID"
    description: "Unique case ID"
    inputBinding:
        prefix: --case_id

  - id: "#host"
    type: string
    default: "pgreadwrite.osdc.io"
    label: "Host"
    description: "hostname for db"
    inputBinding:
        prefix: --host

  - id: "#database"
    type: string
    default: "prod_bioinfo"
    label: "Database"
    description: "name of the database"
    inputBinding:
        prefix: --database

  - id: "#postgres_config"
    type: File
    label: "Postgres Config"
    description: "postgres config file"
    inputBinding:
        prefix: --postgres_config

  - id: "#input_file"
    type: File
    default: null
    label: "Input File"
    description: "Path to input file for md5" 
    inputBinding:
        prefix: --input_file

outputs: []

baseCommand: ["/home/ubuntu/.virtualenvs/p3/bin/python", "/home/ubuntu/tools/variant-filtration-tool/main.py", "postgres"]
